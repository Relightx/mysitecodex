---
import { workItems, type WorkItem } from '../data/work';

const getThumbnail = (item: WorkItem): string => {
  if (item.youtubeId) {
    return `https://img.youtube.com/vi/${item.youtubeId}/hqdefault.jpg`;
  }

  if (item.thumbnail) {
    return item.thumbnail;
  }

  const fallbackText = encodeURIComponent(item.title);
  return `https://placehold.co/1280x720/161616/f0f0f0?text=${fallbackText}`;
};
---

<section id="work" class="section work-section" aria-labelledby="work-title">
  <div class="section-head">
    <p class="kicker">SELECTED PROJECTS</p>
    <h2 id="work-title" class="work-heading">WORK</h2>
  </div>

  <ul class="work-list worksGrid">
    {workItems.map((item, index) => (
      <li class="work-item workCard">
        <a href={item.link} target="_blank" rel="noreferrer" class="work-link" aria-label={`${item.title} (opens in a new tab)`}>
          <div class="workThumb">
            <img class="work-thumb" src={getThumbnail(item)} alt={`${item.title} thumbnail`} loading="lazy" />
          </div>
          <div class="work-meta">
            <h3 class="work-title">{item.title}</h3>
          </div>
        </a>
      </li>
    ))}
  </ul>
</section>
